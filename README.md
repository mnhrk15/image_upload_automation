# HotPepperBeauty スタイル画像 GoogleMap自動投稿アプリ

このアプリケーションは、ユーザーが指定した美容室のHotPepperBeauty（HPB）のトップページURLと、対象Googleビジネスプロフィール（GBP）の写真投稿画面URLに基づき、HPBから最新のヘアスタイル画像を取得・選択し、指定されたGBPに自動で投稿することにより、GBPコンテンツの更新作業を効率化するデスクトップアプリケーションです。

## 機能
- HPBサロンページからの最新スタイル画像取得
- 取得画像のサムネイル表示と選択
- ワンクリックでのGBP写真投稿
- 認証情報の自動保存と管理
- シンプルで使いやすいUI

## 必要環境
- Python 3.9以上
- 以下のライブラリ（requirements.txtに記載）:
  - PyQt6（GUI）
  - Playwright（ブラウザ自動操作）
  - Requests, BeautifulSoup4（スクレイピング）

## インストール方法

### 1. リポジトリをクローン
```bash
git clone https://github.com/yourusername/img_upload_automation.git
cd img_upload_automation
```

### 2. 仮想環境のセットアップ（推奨）
```bash
python -m venv .venv
# Windows
.venv\Scripts\activate
# macOS/Linux
source .venv/bin/activate
```

### 3. 依存パッケージのインストール
```bash
pip install -r requirements.txt
```

### 4. Playwrightのブラウザインストール
```bash
playwright install
```

## 使用方法

### アプリケーションの起動
```bash
python -m src.app
```

### 基本的な使い方
1. **初回セットアップ（または再ログイン時）:**
   - アプリ起動
   - 「手動Googleログイン」ボタンをクリック
   - 表示されるブラウザでGoogleアカウントにログイン
   - ログイン完了後「ログイン完了」ボタンをクリック
   - ログイン情報が自動保存される

2. **通常利用:**
   - HPB URLを入力
   - GBP写真投稿画面URLを入力
   - 「画像を取得」ボタンをクリック
   - 表示された画像から投稿したいものを選択（デフォルトではすべて選択）
   - 「選択した画像を投稿」ボタンをクリック
   - 投稿完了を待つ

## 注意事項

### storage_stateについて
- アプリケーションはログイン情報を`storage_state.json`ファイルに保存します
- このファイルにはGoogleアカウントのセッション情報が含まれるため、適切に管理してください
- セキュリティリスクを防ぐため、共有コンピュータでの使用は避けてください
- ログインセッションが無効になった場合は「手動Googleログイン」ボタンから再ログインしてください

### Googleログインについて
- Googleは自動化ツールによるログインを制限している場合があります
- アプリケーションはこれに対応するため「手動ログイン」機能を提供しています
- ログインに失敗する場合は手動ログイン機能を使用してください

### HPB/GBPの仕様変更
- HPBやGoogleのウェブサイト構造が変更された場合、アプリケーションが正常に動作しなくなる可能性があります
- その場合は`config.json`ファイルのセレクタ情報を更新する必要があります

## トラブルシューティング

### ログインに関する問題
- 「このブラウザは安全でない可能性があります」というエラーが表示される場合:
  - 「手動Googleログイン」機能を使用してください
  - ログイン完了後に「ログイン完了」ボタンをクリックすることでセッションを保存できます

### 画像取得に関する問題
- 画像が取得できない場合:
  - HPB URLが正しいか確認してください
  - インターネット接続を確認してください
  - HPBのウェブサイト構造が変更された可能性があります

### 画像投稿に関する問題
- 画像の投稿に失敗する場合:
  - Googleログイン状態を確認してください
  - GBP URLが正しいか確認してください
  - GBPの画面構造が変更された可能性があります

## ライセンス
MITライセンスで公開しています。詳細はLICENSEファイルをご覧ください。 