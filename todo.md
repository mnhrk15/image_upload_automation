# 実装タスクリスト

- [x] プロジェクト構造設定 (ディレクトリ、設定ファイル置き場)
- [x] 設定ファイル (`config.json` or `selectors.yaml`) のフォーマット定義と読み込み/書き込み機能実装
- [x] HPBスクレイピングモジュール (`hpb_scraper.py`)
    - [x] サロン名取得機能
    - [x] スタイルページ特定・最大ページ数取得機能
    - [x] 最新10件のユニークな高解像度画像URL取得機能 (重複排除含む)
    - [x] 画像ダウンロード機能 (一時ディレクトリへ保存)
- [x] GUIモジュール (`main_window.py` / `app.py`) - PyQt6
    - [x] メインウィンドウの基本レイアウト作成
    - [x] HPB URL入力欄実装
    - [x] GBP写真投稿URL入力欄実装
    - [x] Googleログイン/状態確認ボタンとステータス表示実装
    - [x] 「画像を取得」ボタン実装
    - [x] 画像サムネイル表示エリア実装 (スクロール、チェックボックス付き)
    - [x] 「選択した画像を投稿」ボタン実装 (画像取得後に有効化)
    - [x] ステータス表示エリア/ログ表示エリア実装
    - [x] メニューバー実装 (ヘルプ、終了)
    - [x] 入力URLの保存・復元機能 (オプション)
- [x] Playwright GBP投稿モジュール (`gbp_uploader.py`)
    - [x] `storage_state` の読み込み・保存機能
    - [x] Googleログイン状態確認・再ログイン要求フロー
    - [x] Playwrightによるブラウザ起動 (ヘッドレスモード選択可)
    - [x] 手動ログイン機能の実装（自動ログイン失敗対策）
    - [x] 指定されたGBP写真投稿URLへのアクセス機能
    - [x] 設定ファイルから読み込んだセレクタを使用した写真追加操作
    - [x] Playwright `setInputFiles` を使用した画像ファイルアップロード機能
    - [x] 投稿完了操作
- [x] 非同期処理/マルチスレッド実装
    - [x] HPBスクレイピング処理のバックグラウンド実行
    - [x] GBP投稿処理のバックグラウンド実行
    - [x] GUIの応答性維持
- [x] エラーハンドリングとロギング
    - [x] 各処理ステップでの例外捕捉
    - [x] ユーザーフレンドリーなエラーメッセージ表示 (GUI)
    - [x] 詳細なエラーログファイル生成
- [x] `requirements.txt` 作成
- [x] README.md 作成 (セットアップ手順、`storage_state`に関する注意喚起含む)
- [ ] 実行可能ファイル化 (PyInstaller) 設定 (`build.spec` など)

## 次のタスク・改善点

- [ ] GBPログイン時のセキュリティ対策強化
  - [x] 手動ログイン機能（実装済み）
  - [x] ユーザーガイドへの注意書き追加（README.mdに記載済み）
- [ ] 一時ファイルの管理・クリーンアップ機能
- [ ] ログファイルのローテーション実装
- [ ] GUIデザインの改善
  - [ ] リサイズ時の挙動調整
- [ ] セレクタ更新機能
  - [ ] 設定ファイルのバックアップと復元
  - [ ] GUIからのセレクタ編集機能（管理者向け）
- [ ] エラー発生時のスクリーンショット取得機能強化
- [ ] 定期的な自動テスト機能
